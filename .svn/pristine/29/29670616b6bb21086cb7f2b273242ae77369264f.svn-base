<!--index -->
  <include file="public:index"   />
<!--index-->
<script type="text/javascript" src="__PUBLIC__/timejs/laydate.js"></script>
<title>积分商城编辑</title>
</head>
<body>
 <nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i>
  系统 <span class="c-gray en">&gt;</span>
   积分管理 <span class="c-gray en">&gt;</span>
    积分商城<span class="c-gray en">&gt;</span>
    编辑
    <a class="btn btn-success radius r mr-20" style="line-height:1.6em;margin-top:3px" href="#" onClick="javascript :history.go(-1);" title="返回" ><i class="Hui-iconfont">&#xe66b;</i></a><a class="btn btn-success radius r mr-20" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav> 
<div class="pd-20">
	<form action="{:U('/home/goldmall/goldmallupdate')}" method="post" name="main_form" class="form form-horizontal" id="form-admin-add">
        <input type="hidden" name="id" value="{$data['id']}">
        <input type="hidden" name="goods_id" value="{$data['goods_id']}">
        <input type="hidden" name="retime" value="{$data['start_time']}">
        <input type="hidden" name="retime2" value="{$data['end_time']}">
        <!--<input type="hidden" name="orname" value="{$data['name']}">-->
		<div class="row cl">
			<label class="form-label col-3"><span class="c-red">*</span>商家信息：</label>
			<div class="formControls col-5">
                <input type="text" class="input-text" value="{$data['forshort']} &nbsp;({$data['s_number']})" placeholder="请输出物流名称" id="sn" name="sn" datatype="*2-16" readonly>
			</div>
			<div class="col-4"> </div>
		</div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>商品名称：</label>
            <div class="formControls col-5">
                <input type="text" class="input-text" value="{$data['goods_name']}" placeholder="请输出物流名称" id="sn" name="sn" datatype="*2-16" readonly >
            </div>
            <div class="col-4"> </div>
        </div>

    <div class="row cl">
      <label class="form-label col-3"><span class="c-red">*</span>商品编号：</label>
      <div class="formControls col-5">
        <input type="text" class="input-text" value="{$data['g_number']}" placeholder="请输出物流名称" id="name" name="name" datatype="*2-16" readonly >
      </div>
      <div class="col-4"> </div>
    </div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>所需积分数量：</label>
            <div class="formControls col-5">
                <input type="text" class="input-text" value="{$data['gold_price']}" placeholder="请输出大于0的整数" id="gold_price" name="gold_price" datatype="*2-16"  onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}>
            </div>
            <div class="col-4"> </div>
        </div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>商品金额：</label>
            <div class="formControls col-5">
                <input type="text" class="input-text" value="{$data['money']}" placeholder="请输出商品金额" id="money" name="money" datatype="*2-16">
            </div>
            <div class="col-4"> </div>
        </div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>可售数量：</label>
            <div class="formControls col-5">
                <input type="text" class="input-text" value="{$data['surplus_number']}" placeholder="请输出大于0的整数" id="surplus_number" name="surplus_number" datatype="*2-16" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}>
            </div>
            <div class="col-4"> </div>
        </div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>开始时间：</label>
            <div class="formControls col-5">
                <!--<input type="date" placeholder="开始时间" id="l_time" name="l_time" value="{$data['start_time']}" >-->
                <input placeholder="开始时间" class="laydate-icon" style="height:29px;" value="{$data['start_time']|date='Y-m-d H:i:s',###}" name="l_time" id="l_time" onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
            </div>
            <div class="col-4"> </div>
        </div>

        <div class="row cl">
            <label class="form-label col-3"><span class="c-red">*</span>结束时间：</label>
            <div class="formControls col-5">
                <!--<input type="date" placeholder="结束时间" id="r_time" name="r_time" value="{$data['end_time']}">-->
                <input placeholder="结束时间" class="laydate-icon" style="height:29px;" value="{$data['end_time']|date='Y-m-d H:i:s',###}" name="r_time" id="r_time" onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
            </div>
            <div class="col-4"> </div>
        </div>

		<div class="row cl">
			<div class="col-9 col-offset-3">
				<input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;保存&nbsp;&nbsp;" onclick="return check()">
                <input class="btn btn-primary radius" type="reset" value="&nbsp;&nbsp;重置&nbsp;&nbsp;">
			</div>
		</div>
	</form>
</div>
<script type="text/javascript" src="__PUBLIC__/admin/lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/admin/lib/icheck/jquery.icheck.min.js"></script> 
<script type="text/javascript">
function check(){
    //form1是form中的name属性   
    var _form = document.main_form;   
    if(trim(_form.gold_price.value)==""){
        alert("所需积分数量不能为空!");
        return false;   
    }
    if(trim(_form.gold_price.value)=="0"){
        alert("所需积分数量不能为0!");
        return false;
    }
    if(trim(_form.surplus_number.value)==""){
        alert("可售数量不能为空!");
        return false;   
    }
    if($('#l_time').val() >= $('#r_time').val()) {
        alert("有效起始时间不能大于等于结束时间!");
        return false;
    }
   /* if(trim(_form.perkg_cost.value)==""){
        alert("续重运费不能为空!");
        return false;   
    }*/
    return true;
}

function trim(s) {   
   var count = s.length;   
   var st    = 0;       // start   
   var end   = count-1; // end   

   if (s == "") return s;   
   while (st < count) {   
     if (s.charAt(st) == " ")   
       st ++;   
     else  
       break;   
   }   
   while (end > st) {   
     if (s.charAt(end) == " ")   
       end --;   
     else  
       break;   
   }   
   return s.substring(st,end + 1);   
 }
</script>
 <script type="text/javascript">
     !function(){
         laydate.skin('molv');//切换皮肤，请查看skins下面皮肤库
         laydate({elem: '#demo'});//绑定元素
     }();
     var start = {
         elem: '#l_time',
         format: 'YYYY/MM/DD hh:mm:ss',
         min: laydate.now(), //设定最小日期为当前日期
         max: '2099-06-16 23:59:59', //最大日期
         istime: true,
         istoday: false,
         choose: function(datas){
             end.min = datas; //开始日选好后，重置结束日的最小日期
             end.start = datas //将结束日的初始值设定为开始日
         }
     };
     var end = {
         elem: '#r_time',
         format: 'YYYY/MM/DD hh:mm:ss',
         min: laydate.now(),
         max: '2099-06-16 23:59:59',
         istime: true,
         istoday: false,
         choose: function(datas){
             start.max = datas; //结束日选好后，重置开始日的最大日期
         }
     };
     laydate(start);
     laydate(end);
 </script>
</body>
</html>